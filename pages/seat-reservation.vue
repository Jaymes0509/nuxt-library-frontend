<template>
  <div class="reservation-page">
    <h1>ğŸ“š è‡ªç¿’åº§ä½é ç´„</h1>

    <SeatDatePicker v-model="selectedDate" />
    <SeatTimeSlot v-model="selectedSlot" />

    <SeatMap :date="selectedDate" :timeSlot="selectedSlot" @seat-selected="onSeatSelected" />

    <div v-if="selectedSeat" class="submit-section">
      <p>å·²é¸åº§ä½ï¼š{{ selectedSeat }}</p>
      <button @click="submitReservation">ç¢ºèªé ç´„</button>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import SeatDatePicker from '@/components/SeatDatePicker.vue'
import SeatTimeSlot from '@/components/SeatTimeSlot.vue'
import SeatMap from '@/components/SeatMap.vue'

const selectedDate = ref(null)
const selectedSlot = ref(null)
const selectedSeat = ref(null)

const onSeatSelected = (seatCode) => {
  selectedSeat.value = seatCode
}

const submitReservation = () => {
  if (!selectedDate.value || !selectedSlot.value || !selectedSeat.value) {
    alert('è«‹å…ˆé¸æ“‡æ—¥æœŸã€æ™‚æ®µèˆ‡åº§ä½')
    return
  }

  // TODO: å‘¼å« API æäº¤é ç´„
  alert(`é ç´„æˆåŠŸï¼š${selectedDate.value} ${selectedSlot.value} åº§ä½ ${selectedSeat.value}`)
}
</script>

<style scoped>
.reservation-page {
  max-width: 800px;
  margin: auto;
  padding: 2rem;
}
.submit-section {
  margin-top: 20px;
}
</style>
